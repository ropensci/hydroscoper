<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An introduction to `hydroscoper` • hydroscoper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to `hydroscoper`">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydroscoper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_hydroscoper.html">An introduction to `hydroscoper`</a>
    </li>
    <li>
      <a href="../articles/stations_with_data.html">Using `hydroscoper`'s data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/hydroscoper/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An introduction to <code>hydroscoper</code>
</h1>
                        <h4 data-toc-skip class="author">Konstantinos
Vantas</h4>
            
            <h4 data-toc-skip class="date">2024-12-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/hydroscoper/blob/master/vignettes/intro_hydroscoper.Rmd" class="external-link"><code>vignettes/intro_hydroscoper.Rmd</code></a></small>
      <div class="hidden name"><code>intro_hydroscoper.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="what-is-hydroscope">What is Hydroscope?<a class="anchor" aria-label="anchor" href="#what-is-hydroscope"></a>
</h2>
<p><code>Hydroscope</code> is the Greek National Data Bank for
Hydrological and Meteorological Information, a result of long-standing
efforts by numerous Greek scientists in collaboration with various
companies and associations. It was implemented in three phases, funded
by the Ministry of Development, the Ministry of Environment and Energy
and the European Union.</p>
<p>This National Data Bank provides several data sources from various
organisations via a web interface. Each participating organisation keeps
its data on its own server using a database system for the storage and
management of information. These organisations are:</p>
<ul>
<li>Ministry of Environment and Energy.</li>
<li>Ministry of Rural Development and Food.</li>
<li>National Meteorological Service.</li>
<li>National Observatory of Athens.</li>
<li>Greek Prefectures.</li>
<li>Public Power Corporation.</li>
</ul>
<p>The above data are structured as tables and space separated text
files, but are in Greek, thus limiting their usefulness. Another issue
with Hydroscope is the lack of comprehensive look-up tables about the
available data, which are spread across many different databases.</p>
</div>
<div class="section level2">
<h2 id="what-does-hydroscoper">What does <code>hydroscoper</code>?<a class="anchor" aria-label="anchor" href="#what-does-hydroscoper"></a>
</h2>
<p><code>hydroscoper</code> provides functionality for automatic
retrieval and translation of Hydroscope’s data to English. The main
functions that can be utilized is the family of functions,
<code>get_stations</code>, <code>get_timeseries</code>,
<code>get_data</code>, etc., to easily download Hydroscope’s data as
<code>tibbles</code>.</p>
<p>The package covers Hydroscope’s data sources using the Enhydris API.
The Enhydris database is implemented in PostgreSQL and details about the
about the Web-service API <a href="http://enhydris.readthedocs.io" class="external-link">here</a>.</p>
<div class="section level3">
<h3 id="internal-datasets">Internal datasets<a class="anchor" aria-label="anchor" href="#internal-datasets"></a>
</h3>
<p>The internal datasets of the package can be used to run queries on
the available Hydroscope’s stations and time series data, reducing the
time needed for downloading and data wrangling, as these data are rarely
modified. These datasets are:</p>
<div class="section level4">
<h4 id="stations">
<code>stations</code><a class="anchor" aria-label="anchor" href="#stations"></a>
</h4>
<p>It is a comprehensive look-up table with geographical and ownership
information of the available stations in all Hydroscope’s databases. The
variables are:</p>
<ol style="list-style-type: decimal">
<li>
<code>station_id</code> The station’s ID.</li>
<li>
<code>name</code> The station’s name.</li>
<li>
<code>water_basin</code> The station’s Water Basin.</li>
<li>
<code>water_division</code> The station’s Water Division.</li>
<li>
<code>owner</code> The station’s owner.</li>
<li>
<code>longitude</code> The station’s longitude in decimal degrees,
(ETRS89).</li>
<li>
<code>latitude</code> The station’s latitude in decimal degrees,
(ETRS89).</li>
<li>
<code>altitude</code> The station’s altitude, meters above sea
level.</li>
<li>
<code>subdomain</code> The corresponding Hydroscope’s database.</li>
</ol>
</div>
<div class="section level4">
<h4 id="timeseries">
<code>timeseries</code><a class="anchor" aria-label="anchor" href="#timeseries"></a>
</h4>
<p>It is also a look-up table with all the available measurements for a
given station in a given Hydroscope’s database, with units of
measurement and times of those measurements. The variables are:</p>
<ol style="list-style-type: decimal">
<li>
<code>time_id</code> The time series ID.</li>
<li>
<code>station_id</code> The corresponding station’s ID.</li>
<li>
<code>variable</code> The time series variable type.</li>
<li>
<code>timestep</code> The timestep of time series.</li>
<li>
<code>units</code> The units of the time series.</li>
<li>
<code>start_date</code> The starting date of time series
values.</li>
<li>
<code>end_date</code> The ending date of time series values.</li>
<li>
<code>subdomain</code> The corresponding Hydroscope’s database.</li>
</ol>
</div>
</div>
</div>
<div class="section level2">
<h2 id="data-sources">Data sources<a class="anchor" aria-label="anchor" href="#data-sources"></a>
</h2>
<ul>
<li>Ministry of Environment and Energy, National Observatory of Athens
and Greek Prefectures, <code>http://kyy.hydroscope.gr/</code>.</li>
<li>Ministry of Rural Development and Food,
<code>http://ypaat.hydroscope.gr</code>.</li>
<li>National Meteorological Service,
<code>http://emy.hydroscope.gr</code>.</li>
<li>Greek Public Power Corporation,
<code>http://deh.hydroscope.gr</code>.</li>
</ul>
<p>Note that:</p>
<ol style="list-style-type: decimal">
<li>Only the two Ministries allow to download time series values
freely.</li>
<li>
<code>ypaat</code>, <code>emy</code> and <code>kyy</code>
sub-domains are maintained by the National Technical University Of
Athens and these servers work seamlessly.</li>
<li>
<code>deh</code> sub-domain is maintained by the Greek Public Power
Corporation and occasionally the server is down.</li>
</ol>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows how to get the stations’ and time
series’ data from the Hydroscope’s Ministry of Environment and Energy
database, <code>http://kyy.hydroscope.gr/</code>.</p>
<p>Load libraries:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/hydroscoper" class="external-link">hydroscoper</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></code></pre></div>
<p>We will use the package’s data <code>stations</code> and
<code>timeseries</code>, to reduce the time needed with data munging. We
can subset the station’s data for the <code>kyy</code> sub-domain
with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"stations"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># subset stations data</span></span>
<span><span class="va">kyy_stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">stations</span>, <span class="va">subdomain</span> <span class="op">==</span> <span class="st">"kyy"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view kyy stations</span></span>
<span><span class="va">kyy_stations</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 425 × 9</span></span></span>
<span><span class="co">#&gt;    station_id name  water_basin water_division owner longitude latitude altitude</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     <span style="text-decoration: underline;">501</span>032 AG. … <span style="color: #949494;">"</span>KOURTALIO… GR13           min_…      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     <span style="text-decoration: underline;">200</span>246 GEPH… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.0     37.5     318 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     <span style="text-decoration: underline;">200</span>237 TROP… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.0     37.7     728.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     <span style="text-decoration: underline;">200</span>231 BYTI… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.2     37.7    <span style="text-decoration: underline;">1</span>011.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     <span style="text-decoration: underline;">200</span>200 LYKO… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.2     37.9     758.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     <span style="text-decoration: underline;">200</span>236 MEGA… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.1     37.4     429.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     <span style="text-decoration: underline;">200</span>244 ODOG… <span style="color: #949494;">"</span>REMA CHOR… GR01           min_…      21.8     37.0     182.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     <span style="text-decoration: underline;">200</span>204 TRIP… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      21.9     37.9     570.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     <span style="text-decoration: underline;">200</span>198 KAST… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.0     37.9     792.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     <span style="text-decoration: underline;">200</span>239 PERD… <span style="color: #949494;">"</span>ALPHEIOS … GR01           min_…      22.0     37.7     837.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 415 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: subdomain &lt;chr&gt;</span></span></span></code></pre></div>
<p>Let’s plot these stations using the package’s dataset
<code>greece_borders</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">greece_borders</span>,</span>
<span>               <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>,</span>
<span>               fill <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>               color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">kyy_stations</span>,</span>
<span>             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">longitude</span>, y <span class="op">=</span> <span class="va">latitude</span><span class="op">)</span>,</span>
<span>             color <span class="op">=</span> <span class="st">"#E64B35FF"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span>ratio<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 11 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="intro_hydroscoper_files/figure-html/kyy_stations_map-1.png" width="700"></p>
<p>To get the time series’ data for the station <code>200200</code> we
can use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">station_ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">timeseries</span>, <span class="va">station_id</span> <span class="op">==</span> <span class="fl">200200</span><span class="op">)</span></span>
<span><span class="va">station_ts</span></span></code></pre></div>
<p>We can download the station’s precipitation time series
<strong>56</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ts_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>subdomain <span class="op">=</span> <span class="st">"kyy"</span>, time_id <span class="op">=</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="va">ts_raw</span></span></code></pre></div>
<p>Let’s create a plot:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ts_raw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span> <span class="st">"30 min precipitation"</span>, </span>
<span>       subtitle <span class="op">=</span> <span class="st">"station 200200"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Rain height (mm)"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Konstantinos Vantas.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
