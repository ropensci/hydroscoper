---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Travis-CI Build Status](https://travis-ci.org/kvantas/hydroscoper.svg?branch=master)](https://travis-ci.org/kvantas/hydroscoper)


# hydroscoper

The goal of **hydroscoper** is to provide an interface to the Greek National Databank for Hydrological and Meteorological Information, [Hydroscope](<http://www.hydroscope.gr/>). It provides functions for downloading stations and timeseries data.

The stations and timeseries data in Hydroscope are in Greek, so this package transliterates the Unicode text to Latin, and translates various Greek terms to English. Finally, the **hydroscoper** provides a function to convert raw timeseries' data into a tidy dataframe.

## Installation

You can install **hydroscoper** from github with:

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("kvantas/hydroscoper")
```

## Stations list

This is a basic example which shows you how to get the stations list from the Hydroscope's Ministry of Environment and Energy database (subdomain *kyy*):

```{r example stations}
library(hydroscoper)
stations <- get_stations(subdomain = "kyy")
head(stations[c("StationID", "WaterDivisionID", "Name", "Owner", "Type")])
```


## Stations coordinates

With the following code you can get the coordinates and the elevation for the meteorological stations from Ministry of Environment and Energy (min_env) in the Water Division of Crete, GR13:

```{r example coords}
library(plyr)
crete_stations <-subset(stations, WaterDivisionID == 'GR13' & Owner == 'min_env')
crete_coords <- ldply(crete_stations$ID, function(x) {
  get_coords(subdomain = "kyy", stationID = x)})
head(crete_coords)
```

## Timeseries list

To get the timeseries list in a dataframe from a specific station you can use the following code:

```{r get timeseries}

ts_data <- get_timeseries(subdomain = "kyy", stationID = 200292)
ts_data
```

## Raw data

With the following code you can get the timeseries values from using a timeseries ID
```{r}
ts_raw <- get_data(subdomain = "kyy", timeID = 1022)
```

Let's create a plot for the rainfall data:
```{r plot data}
suppressPackageStartupMessages(library(ggplot2))
ggplot(data = ts_raw, aes(x = Date, y = Value))+
  geom_line()+
  labs(title="Daily rainfall for station 200292",
       x="Date", y = "Rain (mm)")+
  theme_classic()

```

